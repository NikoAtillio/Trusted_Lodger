{% extends 'base.html' %}

{% block content %}
<div class="container">
    <h1>Create Room Listing</h1>

    {% if messages %}
    <div class="messages">
        {% for message in messages %}
        <div class="alert {% if message.tags %}alert-{{ message.tags }}{% endif %}">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <form id="listingForm" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        
        <!-- Add title field which was missing -->
        <div class="form-group">
            <label for="title">Listing Title:</label>
            <input type="text" id="title" name="title" required>
        </div>

        <div class="form-group">
            <label for="images">Room Images:</label>
            <input type="file" id="images" name="images" multiple accept="image/*">
            <div id="carousel" class="carousel"></div>
        </div>

        <div class="form-group">
            <label for="location">Location:</label>
            <input type="text" id="location" name="location" required>
            <div id="map" style="height: 300px;"></div>
        </div>

        <!-- Add postcode field which was missing -->
        <div class="form-group">
            <label for="postcode">Postcode:</label>
            <input type="text" id="postcode" name="postcode" required>
        </div>

        <div class="form-group">
            <label for="price">Price (£/monthly):</label>
            <input type="number" id="price" name="price" required>
        </div>

        <div class="form-group">
            <label for="description">Description:</label>
            <textarea id="description" name="description" rows="4" required></textarea>
        </div>

        <h2>House Share Details</h2>
        <div class="form-group">
            <label for="size">Size:</label>
            <input type="text" id="size" name="size" required>
        </div>
        <div class="form-group">
            <label for="availability">Availability:</label>
            <input type="date" id="availability" name="availability" required>
        </div>
        <div class="form-group">
            <label for="minimum_term">Minimum Term (months):</label>
            <input type="number" id="minimum_term" name="minimum_term" required min="1">
        </div>
        <div class="form-group">
            <label for="maximum_term">Maximum Term (months):</label>
            <input type="number" id="maximum_term" name="maximum_term" min="1">
        </div>
        <div class="form-group">
            <label for="deposit">Deposit (£):</label>
            <input type="number" id="deposit" name="deposit" required>
        </div>
        <div class="form-group">
            <label for="bills_included">Bills Included?</label>
            <select id="bills_included" name="bills_included">
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select>
        </div>
        <div class="form-group">
            <label for="furnishings">Furnishings:</label>
            <input type="text" id="furnishings" name="furnishings" required>
        </div>
        <div class="form-group">
            <label for="parking">Parking:</label>
            <select id="parking" name="parking">
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select>
        </div>
        <div class="form-group">
            <label for="garden">Garden/Patio:</label>
            <select id="garden" name="garden">
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select>
        </div>
        <div class="form-group">
            <label for="balcony">Balcony/Roof Terrace:</label>
            <select id="balcony" name="balcony">
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select>
        </div>
        <div class="form-group">
            <label for="disabled_access">Disabled Access:</label>
            <select id="disabled_access" name="disabled_access">
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select>
        </div>
        <div class="form-group">
            <label for="living_room">Living Room:</label>
            <select id="living_room" name="living_room">
                <option value="shared">Shared</option>
                <option value="private">Private</option>
            </select>
        </div>
        <div class="form-group">
            <label for="broadband">Broadband Included:</label>
            <select id="broadband" name="broadband">
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select>
        </div>
        <div class="form-group">
            <label for="current_household">Current Household:</label>
            <input type="number" id="current_household" name="current_household" required>
        </div>
        <div class="form-group">
            <label for="total_rooms">Total # Rooms:</label>
            <input type="number" id="total_rooms" name="total_rooms" required>
        </div>
        <div class="form-group">
            <label for="ages">Ages:</label>
            <input type="text" id="ages" name="ages" required>
        </div>
        <div class="form-group">
            <label for="smoker">Smoker?</label>
            <select id="smoker" name="smoker">
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select>
        </div>
        <div class="form-group">
            <label for="pets">Any Pets?</label>
            <select id="pets" name="pets">
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select>
        </div>
        <div class="form-group">
            <label for="occupation">Occupation:</label>
            <input type="text" id="occupation" name="occupation" required>
        </div>
        <div class="form-group">
            <label for="gender">Gender:</label>
            <input type="text" id="gender" name="gender" required>
        </div>

        <h2>New Housemate Preferences</h2>
        <div class="form-group">
            <label for="couples_ok">Couples OK?</label>
            <select id="couples_ok" name="couples_ok">
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select>
        </div>
        <div class="form-group">
            <label for="smoking_ok">Smoking OK?</label>
            <select id="smoking_ok" name="smoking_ok">
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select>
        </div>
        <div class="form-group">
            <label for="pets_ok">Pets OK?</label>
            <select id="pets_ok" name="pets_ok">
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select>
        </div>
        <div class="form-group">
            <label for="occupation_preference">Preferred Occupation:</label>
            <input type="text" id="occupation_preference" name="occupation_preference" required>
        </div>
        <div class="form-group">
            <label for="references_required">References Required?</label>
            <select id="references_required" name="references_required">
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select>
        </div>
        <div class="form-group">
            <label for="min_age">Min Age:</label>
            <input type="number" id="min_age" name="min_age" required min="18">
        </div>
        <div class="form-group">
            <label for="max_age">Max Age:</label>
            <input type="number" id="max_age" name="max_age" required min="18">
        </div>

        <button type="submit">Post Now</button>
    </form>
</div>

{% block extra_js %}
<script src="{% static 'js/create_listing.js' %}"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places&callback=initMap" async defer></script>
{% endblock %}