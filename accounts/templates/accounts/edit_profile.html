{% extends 'base.html' %}

{% block content %}

<div class="profile-setup-form">
    <h2>Edit Profile</h2>
    <form method="post" enctype="multipart/form-data"> <!-- Add enctype for file uploads -->
        {% csrf_token %}
        
        <!-- User Status -->
        <div class="form-group">
            <label>What do you use SpareRoom for?</label>
            <div class="form-check">
                <label class="form-check-label">
                    <input type="radio" name="user_status" value="looking_for_share" class="form-check-input" {% if profile.user_status == 'looking_for_share' %}checked{% endif %}> 
                    I am looking for a flat or house share
                </label>
            </div>
            <div class="form-check">
                <label class="form-check-label">
                    <input type="radio" name="user_status" value="have_share" class="form-check-input" {% if profile.user_status == 'have_share' %}checked{% endif %}> 
                    I have a flat or house share
                </label>
            </div>
            <div class="form-check">
                <label class="form-check-label">
                    <input type="radio" name="user_status" value="find_people" class="form-check-input" {% if profile.user_status == 'find_people' %}checked{% endif %}> 
                    I'd like to find people to form a new share
                </label>
            </div>
        </div>

        <!-- Profile Photo -->
        <div class="form-group">
            <label for="profile_photo">Your profile photo</label>
            <input type="file" name="profile_photo" accept="image/*" class="form-control-file">
            {% if profile.picture %}
                <p>Current photo:</p>
                <img src="{{ profile.picture.url }}" alt="Current Profile Photo" style="max-width: 150px; max-height: 150px; border-radius: 8px;">
            {% else %}
                <p>No current photo uploaded.</p>
            {% endif %}
        </div>

        <!-- Gender -->
        <div class="form-group">
            <label>Gender</label>
            <select name="gender" class="form-control">
                <option value="unknown" {% if profile.gender == 'unknown' %}selected{% endif %}>Unknown</option>
                <option value="male" {% if profile.gender == 'male' %}selected{% endif %}>Male</option>
                <option value="female" {% if profile.gender == 'female' %}selected{% endif %}>Female</option>
                <option value="non_binary" {% if profile.gender == 'non_binary' %}selected{% endif %}>Non-binary</option>
                <option value="prefer_not_to_say" {% if profile.gender == 'prefer_not_to_say' %}selected{% endif %}>Prefer not to say</option>
            </select>
        </div>

        <!-- Age -->
        <div class="form-group">
            <label for="age">Age</label>
            <input type="number" name="age" min="0" max="120" value="{{ profile.age }}" class="form-control">
        </div>

        <!-- Occupation -->
        <div class="form-group">
            <label for="occupation">Occupation</label>
            <input type="text" name="occupation" placeholder="Your occupation" value="{{ profile.occupation }}" class="form-control">
        </div>

        <!-- Bio -->
        <div class="form-group">
            <label for="bio">Tell us about yourself</label>
            <textarea name="bio" rows="4" placeholder="A brief introduction..." class="form-control">{{ profile.bio }}</textarea>
        </div>

        <!-- Living Preferences -->
        <div class="form-group">
            <label>Living Preferences</label>
            <div>
                <label class="form-check">
                    <input type="checkbox" name="preferences" value="quiet" class="form-check-input" {% if 'quiet' in profile.living_preferences %}checked{% endif %}> 
                    Quiet
                </label>
                <label class="form-check">
                    <input type="checkbox" name="preferences" value="social" class="form-check-input" {% if 'social' in profile.living_preferences %}checked{% endif %}> 
                    Social
                </label>
                <label class="form-check">
                    <input type="checkbox" name="preferences" value="smoker" class="form-check-input" {% if 'smoker' in profile.living_preferences %}checked{% endif %}> 
                    Smoker
                </label>
                <label class="form-check">
                    <input type="checkbox" name="preferences" value="pet_owner" class="form-check-input" {% if 'pet_owner' in profile.living_preferences %}checked{% endif %}> 
                    Pet Owner
                </label>
            </div>
        </div>

        <button type="submit" class="btn btn-primary">Save Profile</button>
    </form>
</div>

<style>
    .profile-setup-form {
        max-width: 600px;
        margin: 0 auto;
        padding: 20px;
        border: 1px solid #ccc;
        border-radius: 8px;
        background-color: #f9f9f9;
    }
    .form-group {
        margin-bottom: 15px;
    }
    .form-check {
        margin-bottom: 10px;
    }
    .btn {
        width: 100%;
    }
</style>

{% endblock %}